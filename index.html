<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      .classic {
        text-align: center;
        height: 36px;
        line-height: 30px;
        border: 3px solid!important;
        font-size: 16px;
        background-color: #fdfdfd;
        cursor: pointer;
        box-shadow: 3px 3px #666;
        margin-right: 10px;
        margin-top: 10px;
        padding: 5px 20px;
        outline: none;
        text-decoration: none;
      }
      .classic:hover {
        opacity: 0.7;
      }
      .classic:active {
        background-color: #eee;
        opacity: 1;
      }
      .classic.skyblue {
        border-color: #039BE5;
        color: #039BE5;
      }
      .classic.green {
        border-color: #388e3c;
        color: #388e3c;
      }
      .classic.orange {
        border-color: #f57c00;
        color: #f57c00;
      }
      .classic.pink {
        border-color: #FF80AB;
        color: #FF80AB;
      }
    </style>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0DBRXRMBQ8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-0DBRXRMBQ8');
    </script>
  </head>
  <body>
    <div style="text-align: center; margin: 2rem 0rem">
      <div>원본 게시글</div>
      <div><a id='link' href=''></a></div>
      <div style='margin-top: .5rem;'>
        <span onclick="notify();" style="font-size: .7rem; color: #555; text-decoration: underline; cursor: pointer;">게시글에 접근 권한이 없다는 알림이 뜬다면</span><br>
      </div>
      <div style="margin-top: 2rem;">
        <a class='classic orange' onclick='share();'>카카오톡으로 공유하기</a>
        <br><br>
        <a class='classic green' href='https://open.kakao.com/o/g8BxtUId'>공지방 들어가기</a>
      </div>
    </div>
    <div id='content'></div>
    <style>
      img { max-width: 100%; }
    </style>
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
      Kakao.init('14b07e7037192beae6b790168bb9682f');
      const articleNo = new URLSearchParams(window.location.search).get('articleNo');
      const xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        if(this.readyState == 4 && this.status == 200) {
          document.getElementById('content').innerHTML = this.responseText;
        }
      }
      xhttp.open("GET", `https://luftaquila.io/ajounotice/assets/articles/${articleNo}`, true);
      xhttp.send();

      const url = new URLSearchParams(window.location.search).get('url');
      document.getElementById('link').text = url;
      document.getElementById('link').href = url;
      
      function share() {
        Kakao.Link.sendCustom({
          templateId: 64842,
          templateArgs: {
            title: new URLSearchParams(window.location.search).get('title'),
            desc: new URLSearchParams(window.location.search).get('desc'),
            altlink: 'ajounotice' + window.location.search,
            image: encodeURI(new URLSearchParams(window.location.search).get('image'))
          }
        });
      }

      function notify() {
        Swal.fire({
          icon: 'info',
          html: '<div style="font-size: 1rem;">접근 권한이 없다는 알림이 나오는 게시글은 아주대학교 포탈에 로그인한 사용자에게만 보이는 게시글이에요.<br><br><a href="https://www.ajou.ac.kr/_custom/ajou/_app/sso/login_oia.jsp">여기</a>를 눌러 포탈에 로그인한 후 다시 링크를 클릭하거나, 새로운 브라우저에서 포탈에 로그인한 후 링크를 붙여넣어 확인하세요.</div>'
        });
      }
    </script>
  </body>
</html>